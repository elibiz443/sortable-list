<% if !todo.visibility? %>
  <!-- Icon Block -->
  <%= button_to(todo_path(todo), method: :patch, remote: true) do %>
    <div id="<%= "#{dom_id(todo)}_item" %>">
      <%= turbo_frame_tag dom_id(todo) do %>
        <input type="hidden" name="todo[visibility]" value="<%= todo.visibility = true %>">
        <div class="relative flex justify-center items-center w-12 h-12 bg-white rounded-xl before:absolute before:-inset-px before:-z-[1] before:bg-gradient-to-br before:from-blue-600 before:via-transparent before:to-violet-600 before:rounded-xl">
          <i class="fa-solid fa-folder text-lg text-gray-700"></i>
        </div>
        <div class="mt-5">
          <h4 class="text-gray-400 text-sm ml-1"><%= todo.title %></h4>
        </div>
      <% end %>
    </div>
  <% end %>
  <!-- End Icon Block -->
<% else %>
  <% if !todo.minimized? %>
    <!-- Card -->
    <div class="cursor-pointer card bg-gray-500/[.8] p-4 ease-out duration-400 my-5 w-[40%] mx-auto rounded-md hover:opacity-75 shadow-md shadow-gray-800 hover:shadow-none" data-target="folder.card" data-id="<%= todo.id %>">
      <div data-controller="modal">
        <!-- List -->
        <div class="icon-folder flex items-center justify-center"></div>
        <div class="content">
          <div class="card-button grid grid-cols-3 gap-2 w-[4rem] text-[0.6rem] text-[#731F1E]">
            <%= button_to(todo_path(todo), method: :patch, remote: true, class: "bg-[#FF605C]/[.8] rounded-full w-[1rem] h-[1rem] flex items-center justify-center") do %>
              <input type="hidden" name="todo[visibility]" value="<%= todo.visibility = false %>">
              <i class="icon fa-solid fa-xmark"></i>
            <% end %>
            <%= button_to(todo_path(todo), data: { action: 'click->folder#minimizeCard' }, method: :patch, remote: true, class: "bg-[#FFBD44]/[.8] rounded-full w-[1rem] h-[1rem] flex items-center justify-center") do %>
              <input type="hidden" name="todo[minimized]" value="<%= todo.minimized = true %>">
              <i class="icon fa-solid fa-minus"></i>
            <% end %>
            <%= button_to('', data: { action: 'click->modal#open' }, class: "bg-[#00CA4E]/[.8] rounded-full w-[1rem] h-[1rem] flex items-center justify-center") do %>
              <i class="icon fa-solid fa-up-right-and-down-left-from-center"></i>
            <% end %>
          </div>
          <div class="py-4 border-t border-gray-400 mt-3">
            <h4 class="text-gray-200 text-md"><%= todo.title %></h4>
            <p class="text-gray-300 text-xs"><%= todo.description %></p>
          </div>
        </div>
        <!-- End Of List -->
        <!-- Modal Section -->
        <dialog data-modal-target="modal" class="backdrop:bg-gray-900 backdrop:bg-opacity-60 open:animate-fade-in open:backdrop:animate-fade-in w-[80%] md:w-[60%] h-[20rem] p-5 bg-transparent">
          <!-- Card -->
          <div class="relative w-full h-full bg-gray-200 shadow-lg rounded-lg p-5">
            <button type="button" data-action="modal#close" class="fa-solid fa-xmark text-xs absolute z-50 top-0 right-0 bg-red-500/[.9] text-gray-200 rounded-full w-[1.6rem] h-[1.6rem] flex items-center justify-center mt-[-0.5rem] mr-[-0.5rem]"></button>
            <div class="grid grid-cols-2 gap-4 h-full">
              <div class="flex items-center justify-center">
                <div class="inline-flex justify-center items-center w-[8rem] h-[8rem] rounded-full border-4 border-blue-50 bg-blue-100">
                  <i class="fa-solid fa-list-check text-3xl"></i>
                </div>
              </div>
              <div class="flex items-center">
                <div>
                  <h3 class="block text-lg font-semibold text-gray-600 mb-4"><%= todo.title %></h3>
                  <p class="text-gray-400 text-md"><%= todo.description %></p>
                  <div class="flex gap-4 mt-10">
                    <%= link_to 'Edit', edit_todo_path(todo), class: "bg-green-50 px-4 py-2 rounded inline-flex items-center justify-center text-green-600" %>
                    <%= button_to "Delete", todo_path(todo), method: :delete, class: "bg-red-50 px-3 py-2 rounded inline-flex items-center justify-center text-red-600" %> 
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- End Card -->
        </dialog>
        <!-- End Of Modal Section -->
      </div>
    </div>
    <!-- End of card -->
  <% else %>
    <!-- Minimized card -->
    <%= button_to(todo_path(todo), method: :patch, remote: true) do %>
      <div id="<%= "#{dom_id(todo)}_item" %>">
        <%= turbo_frame_tag dom_id(todo) do %>
          <input type="hidden" name="todo[minimized]" value="<%= todo.minimized = false %>">
          <div class="cursor-pointer card minimized2 bg-gray-600/[.9] ease-out duration-400 flex items-center justify-center shadow-md shadow-gray-800 hover:shadow-none hover:opacity-75" data-cards-target="card">
            <div class="icon-folder2"></div>
          </div>
        <% end %>
      </div>
    <% end %>
    <!-- End of minimized card -->
  <% end %>
<% end %>
